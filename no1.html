<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ | CupfulCanvas</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com" rel="stylesheet">



<style>
       :root {
  --primary: #4b2e21;
  --secondary: #8b5a3c;
  --accent: #d4a373;
  --bg-light: #faf3e0;
  --white: #ffffff;
  --glass: rgba(255, 255, 255, 0.8);
  --transition: all 0.3s ease;
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; }

body { background: var(--bg-light); color: var(--primary); line-height: 1.6; }

/* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…ÙˆØ­Ø¯ */
header {
  padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
  background: var(--glass); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.logo { font-size: 24px; font-weight: bold; color: var(--primary); text-decoration: none; }

.nav-links a { margin-left: 20px; text-decoration: none; color: var(--primary); font-weight: 600; }

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙˆØ­Ø¯Ø© */
.btn {
  padding: 12px 25px; border-radius: 25px; border: none; cursor: pointer;
  transition: var(--transition); text-decoration: none; display: inline-block; font-weight: 600;
}
.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { background: var(--secondary); transform: translateY(-2px); }

/* Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª */
.container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }

/* Ø§Ù„ÙÙˆØ±Ù… (Ù„Ù„Ù†Ù…Ø§Ø°Ø¬) */
.form-card {
  background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);
  max-width: 400px; margin: 50px auto; text-align: center;
}
.form-group { margin-bottom: 20px; text-align: right; }
.form-group input {
  width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; outline: none;
}

/* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 30px; }
.card { background: white; padding: 20px; border-radius: 20px; text-align: center; transition: var(--transition); }
.card:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); }

    </style>

</head>

<body>

<header>
    <a href="index.html" class="logo">CupfulCanvas</a>
    <nav><a href="cart.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø³Ù„Ø©</a></nav>
</header>

<div class="form-card" style="max-width:500px">
    <h2 style="color:var(--primary)">ğŸ“‹ ØªØ£ÙƒÙŠØ¯ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h2>
    <p style="margin-bottom:20px; color:gray">
        Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØµÙˆØ±Ø© ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
    </p>

    <form id="orderForm" onsubmit="sendToWhatsApp(event)">
        <div class="form-group">
            <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
            <input type="text" id="customer-name"
                   placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ"
                   required
                   oninput="this.value = this.value.replace(/[0-9]/g, '')">
        </div>

        <div class="form-group">
            <label>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø© / Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
            <input type="text" id="customer-address"
                   placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø·Ø§ÙˆÙ„Ø© 5"
                   required>
        </div>

        <div id="order-summary"
             style="background:#f9f9f9;padding:15px;border-radius:10px;margin-bottom:20px;font-size:14px">
        </div>

        <button type="submit"
                class="btn btn-primary"
                style="width:100%;background:#25D366;border:none;">
            Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± WhatsApp ğŸ“±
        </button>
    </form>
</div>

<!-- ÙØ§ØªÙˆØ±Ø© Ù…Ø®ÙÙŠØ© -->
<div id="invoice" style="
    width:300px;
    padding:15px;
    background:white;
    border:1px solid #000;
    font-family:Arial;
    display:none;
">
    <h3 style="text-align:center;margin:0">â˜• CupfulCanvas</h3>
    <p id="inv-info" style="font-size:13px"></p>
    <hr>
    <pre id="inv-items" style="font-size:13px;white-space:pre-wrap"></pre>
    <hr>
    <strong id="inv-total"></strong>
</div>

<!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØµÙˆØ±Ø© -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
function loadSummary() {
    const cart = JSON.parse(localStorage.getItem('myCart')) || [];
    const summaryDiv = document.getElementById('order-summary');

    if (cart.length === 0) {
        summaryDiv.innerHTML = "Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©";
        return;
    }

    let total = 0;
    cart.forEach(item => total += parseInt(item.price));

    summaryDiv.innerHTML =
        `<strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙ†Ø§Ù:</strong> ${cart.length}<br>
         <strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> ${total} SAR`;
}

function sendToWhatsApp(event) {
    event.preventDefault();

    const name = document.getElementById('customer-name').value;
    const address = document.getElementById('customer-address').value;
    const cart = JSON.parse(localStorage.getItem('myCart')) || [];

    if (cart.length === 0) {
        alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
        return;
    }

    const orderNumber = Math.floor(1000 + Math.random() * 9000);
    const date = new Date().toLocaleString('ar-SA');

    document.getElementById("inv-info").innerText =
        `Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${orderNumber}\n` +
        `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}\n` +
        `Ø§Ù„Ø¹Ù…ÙŠÙ„: ${name}\n` +
        `Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${address}`;

    let itemsText = "";
    let total = 0;

    cart.forEach((item, i) => {
        itemsText += `${i + 1}. ${item.name} - ${item.price} SAR\n`;
        total += parseInt(item.price);
    });

    document.getElementById("inv-items").innerText = itemsText;
    document.getElementById("inv-total").innerText =
        `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} SAR`;

    const invoice = document.getElementById("invoice");
    invoice.style.display = "block";

    html2canvas(invoice).then(canvas => {
        invoice.style.display = "none";

        const imageURL = canvas.toDataURL("image/png");

        const phoneNumber = "96893308832";
        const message = "ğŸ“‹ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† CupfulCanvas\n(Ø£Ø±Ø³Ù„ ØµÙˆØ±Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©)";
        const whatsappURL =
            `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;

        window.open(whatsappURL, "_blank");

        const imgWin = window.open("");
        imgWin.document.write(`<img src="${imageURL}" style="width:100%">`);
    });
}

loadSummary();
</script>

</body>
</html>
